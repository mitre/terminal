<script src="/gui/js/shared.js"></script>
<html>
    <head>
        <title>Terminal | Options</title>
        <link rel="shortcut icon" type="image/png" href="/gui/img/favicon.png"/>
        <link rel="stylesheet" href="/gui/css/shared.css">
        <link rel="stylesheet" href="/gui/css/navbar.css">
        <link rel="stylesheet" href="/gui/css/basic.css">
        <link rel="stylesheet" href="/gui/css/modal.css">
    </head>
    <body>
    <div class="navbar">
        <a href="/">Home</a>
        <a href="/logout" style="float:right">Logout</a>
    </div>
    <center style="margin-bottom: 100px">
        <div>
            <div id="sandcat-blocks" class="row-canvas">
                <div class="section-profile">
                    <div class="row">
                        <div class="column section-border" style="flex:25%;text-align:left;padding:15px;">
                            <h1 style="font-size:70px;margin-top:-20px;">Terminal</h1>
                            <h2 style="margin-top:-55px">reverse-shells</h2>
                            <p>
                                The terminal plugin gives you the power of reverse-shells
                            </p>
                            <br>
                            <select id="session-id" onchange="openSession()">
                              <option value="" disabled selected>Select a session</option>
                              {% for s in sessions %}
                                  <option value="{{ s.id }}">{{ s.id }}</option>
                              {% endfor %}}
                            </select>
                        </div>
                        <div class="column" style="flex:75%;padding:15px;text-align: left">

                        </div>
                    </div>
                </div>
            </div>
        </div>

        </center>
    </body>
    <script src="/gui/jquery/jquery.js"></script>
    <script>
        function openSession() {
            let i = parseInt($('#session-id option:selected').attr('value'));
            $.ajax({
               url: '/plugin/terminal/session',
               type: 'PUT',
               contentType: 'application/json',
               data: JSON.stringify({'id': i}),
               success: function(data, status, options) { callback(data); },
               error: function (xhr, ajaxOptions, thrownError) { console.log(thrownError) }
            });
        }
    </script>
</html>
