<script src="/gui/js/shared.js"></script>
 <html>
     <head>
         <title>Terminal | Options</title>
         <link rel="shortcut icon" type="image/png" href="/gui/img/favicon.png"/>
         <link rel="stylesheet" href="/gui/css/shared.css">
         <link rel="stylesheet" href="/gui/css/navbar.css">
         <link rel="stylesheet" href="/gui/css/basic.css">
         <link rel="stylesheet" href="/gui/css/modal.css">
     </head>
     <body>
     <div class="navbar">
         <a href="/">Home</a>
         <a href="/logout" style="float:right">Logout</a>
     </div>
     <center style="margin-bottom: 100px">
         <div>
             <div id="sandcat-blocks" class="row-canvas">
                 <div class="section-profile">
                     <div class="row">
                         <div class="column section-border" style="flex:25%;text-align:left;padding:15px;">
                             <h1 style="font-size:70px;margin-top:-20px;">Terminal</h1>
                             <h2 style="margin-top:-55px">reverse-shell operations</h2>
                             <p>
                                 The terminal plugin gives you the power of reverse-shells. Through these shells you
                                 can manually interact with any host. Deploy a reverse-shell
                                 by running the Terminal adversary - using terminal facts - against any of your agents.
                                 This will drop and start a raw TCP reverse-shell in the background.
                             </p>
                             <br>
                             <select id="session-id">
                               <option value="" disabled selected>Select a session</option>
                               {% for s in sessions %}
                                   <option value="{{ s.id }}">{{ s.id }}</option>
                               {% endfor %}}
                             </select>
                         </div>
                         <div class="column ttp-template" style="flex:75%;padding:15px;text-align: left">
                             <h2 id="session-host"></h2>
                             <input id="session-cmd" type="text" placeholder="enter a command"/>
                             <textarea id="session-reply" placeholder="response will show up here"></textarea>
                             <br>
                             <center>
                                 <button type="button" class="button-success atomic-button"
                                         style="width:25%" onclick="sendCommand()">
                                      Send
                                 </button>
                             </center>
                         </div>
                     </div>
                 </div>
             </div>
         </div>

         </center>
     </body>
     <script src="/gui/jquery/jquery.js"></script>
     <script>
         let loc = location.hostname+':8765';
         function sendCommand() {
             let sessionId = $('#session-id option:selected').attr('value');
             let cmd = $('#session-cmd').val();

             let socket = new WebSocket('ws://www.'+loc+'/'+sessionId);
             socket.onopen = function () {
                 socket.send(cmd);
             };
             socket.onmessage = function (s) {
                 $('#session-reply').text(s.data);
             };
         }
     </script>
 </html>